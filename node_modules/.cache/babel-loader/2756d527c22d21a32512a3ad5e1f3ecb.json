{"ast":null,"code":"var _this = this,\n  _jsxFileName = \"C:\\\\Users\\\\HUAWEI\\\\Documents\\\\GitHub\\\\SinfonyPlataforma\\\\src\\\\layouts\\\\PrivateLayout\\\\components\\\\Refresh\\\\Refresh.jsx\";\nimport React, { useEffect } from 'react';\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { logout, refresh } from '_redux/actions';\nvar Refresh = function Refresh() {\n  var dispatch = useDispatch();\n  var auth = useSelector(function (state) {\n    return state.auth;\n  });\n  var onRefresh = function onRefresh() {\n    return axios.post('/api/user/refreshToken', {\n      refresh_token: auth.token.refresh_token\n    })[\"catch\"](function () {\n      Swal.fire({\n        showCancelButton: false,\n        allowEscapeKey: false,\n        allowOutsideClick: false,\n        icon: 'error',\n        title: 'Tuvismo un error',\n        confirmButtonText: 'Iniciar sesion',\n        text: 'No pudimos rescatar su sesion, intente iniciar nuevamente'\n      }).then(function () {\n        dispatch(logout());\n      });\n    });\n  };\n  useEffect(function () {\n    if (auth.expired) Swal.fire({\n      showCancelButton: false,\n      showDenyButton: true,\n      allowEscapeKey: false,\n      allowOutsideClick: false,\n      icon: 'error',\n      title: 'Su sesion ha expirado',\n      confirmButtonText: 'Restaurar sesion',\n      denyButtonText: \"Cerrar sesion\",\n      text: 'Su sesion ha expirado, por favor restaurela',\n      showLoaderOnConfirm: true,\n      preConfirm: onRefresh\n    }).then(function (result) {\n      console.log(result);\n      if (result.isConfirmed && !result.value.data.error) {\n        dispatch(refresh({\n          token: result.value.data\n        }));\n        Swal.fire({\n          showCancelButton: false,\n          allowEscapeKey: false,\n          allowOutsideClick: false,\n          icon: 'success',\n          title: 'Exito',\n          text: 'Ya puedes continuar con tus tareas'\n        });\n      } else {\n        Swal.fire({\n          showCancelButton: false,\n          allowEscapeKey: false,\n          allowOutsideClick: false,\n          icon: 'error',\n          title: 'Tuvismo un error',\n          confirmButtonText: 'Iniciar sesion',\n          text: 'No pudimos rescatar su sesion, intente iniciar nuevamente'\n        }).then(function () {\n          dispatch(logout());\n        });\n      }\n    });\n  }, [auth]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 10\n    }\n  });\n};\nexport default Refresh;","map":{"version":3,"names":["React","useEffect","axios","Swal","useSelector","useDispatch","logout","refresh","Refresh","dispatch","auth","state","onRefresh","post","refresh_token","token","fire","showCancelButton","allowEscapeKey","allowOutsideClick","icon","title","confirmButtonText","text","then","expired","showDenyButton","denyButtonText","showLoaderOnConfirm","preConfirm","result","console","log","isConfirmed","value","data","error","createElement","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["C:/Users/HUAWEI/Documents/GitHub/SinfonyPlataforma/src/layouts/PrivateLayout/components/Refresh/Refresh.jsx"],"sourcesContent":["import React, { useEffect } from 'react'\r\n\r\nimport axios from 'axios'\r\nimport Swal from 'sweetalert2'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nimport { logout, refresh } from '_redux/actions'\r\n\r\nconst Refresh = () => {\r\n  const dispatch = useDispatch()\r\n  const auth = useSelector(state => state.auth)\r\n\r\n  const onRefresh = () => {\r\n    return axios.post('/api/user/refreshToken', { refresh_token: auth.token.refresh_token }).catch(() => {\r\n      Swal.fire({\r\n        showCancelButton: false,\r\n        allowEscapeKey: false,\r\n        allowOutsideClick: false,\r\n        icon: 'error',\r\n        title: 'Tuvismo un error',\r\n        confirmButtonText: 'Iniciar sesion',\r\n        text: 'No pudimos rescatar su sesion, intente iniciar nuevamente',\r\n      }).then(() => {\r\n        dispatch(logout())\r\n      })\r\n    })\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (auth.expired)\r\n      Swal.fire({\r\n        showCancelButton: false,\r\n        showDenyButton: true,\r\n        allowEscapeKey: false,\r\n        allowOutsideClick: false,\r\n        icon: 'error',\r\n        title: 'Su sesion ha expirado',\r\n        confirmButtonText: 'Restaurar sesion',\r\n        denyButtonText: `Cerrar sesion`,\r\n        text: 'Su sesion ha expirado, por favor restaurela',\r\n        showLoaderOnConfirm: true,\r\n        preConfirm: onRefresh,\r\n      }).then(result => {\r\n        console.log(result)\r\n        if (result.isConfirmed && !result.value.data.error) {\r\n          dispatch(refresh({ token: result.value.data }))\r\n          Swal.fire({\r\n            showCancelButton: false,\r\n            allowEscapeKey: false,\r\n            allowOutsideClick: false,\r\n            icon: 'success',\r\n            title: 'Exito',\r\n            text: 'Ya puedes continuar con tus tareas',\r\n          })\r\n        } else {\r\n          Swal.fire({\r\n            showCancelButton: false,\r\n            allowEscapeKey: false,\r\n            allowOutsideClick: false,\r\n            icon: 'error',\r\n            title: 'Tuvismo un error',\r\n            confirmButtonText: 'Iniciar sesion',\r\n            text: 'No pudimos rescatar su sesion, intente iniciar nuevamente',\r\n          }).then(() => {\r\n            dispatch(logout())\r\n          })\r\n        }\r\n      })\r\n  }, [auth])\r\n\r\n  return <div />\r\n}\r\n\r\nexport default Refresh\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}