{"ast":null,"code":"import React,{useEffect,useRef,useState}from\"react\";import{Table,Form,Spin,Alert}from\"antd\";import\"antd/dist/antd.css\";//material ui\nimport Dialog from\"@material-ui/core/Dialog\";import DialogTitle from\"@material-ui/core/DialogTitle\";import DialogContent from\"@material-ui/core/DialogContent\";import DialogActions from\"@material-ui/core/DialogActions\";import VerifiedUserIcon from\"@material-ui/icons/VerifiedUser\";import Button from\"components/CustomButtons/Button.js\";//Local\nimport EditableCell from\"../../components/Custom/EditableCell\";import useTable from\"../../hooks/useTableRol\";import{columns}from\"../../utils/columnRoles\";import FormItem from\"../../components/Custom/FormRoles\";import Permisos from\"./Permisos\";//Styles\nimport useStyles from\"../../assets/jss/material-dashboard-pro-react/views/common\";//Constants\nconst title=\"Roles\";const name=\"Rol\";const key=\"rol\";export default function EditableTable(){const classes=useStyles();const[loadPermit,setLoadPermit]=useState(\"hide\");const[modal,setModal]=useState({visible:false,id:\"\"});const searchInput=useRef();const{formEdit,formCreate,data,permisos,loading,onEdit,onDelete,updateOnEdit,createItem,editItem,delItem,save,isEditing,cancel,onFinishFailed,updateNameItem}=useTable({key});useEffect(()=>{updateNameItem(name);},[]);const setStatePermit=val=>{setLoadPermit(val);};const showModal=record=>{setModal(mod=>({...mod,visible:true,rolName:record.name,id:record.id}));};const handleCancel=()=>{setModal(mod=>({...mod,visible:false}));};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(FormItem,{name:name,title:title,maxName:30,maxCode:5,formCreate:formCreate,createItem:createItem,onFinishFailed:onFinishFailed,loading:loading}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Form,{form:formEdit,component:false},/*#__PURE__*/React.createElement(Table,{className:classes.table,components:{body:{cell:EditableCell}},size:\"small\",bordered:true,scroll:{x:500},dataSource:data,columns:columns(cancel,isEditing,updateOnEdit,save,delItem,editItem,onEdit,onDelete,name,searchInput,classes,showModal),loading:loading,rowClassName:\"editable-row\",pagination:{onChange:cancel,pageSize:5}})),/*#__PURE__*/React.createElement(Dialog,{open:modal.visible,keepMounted:true,onClose:handleCancel,\"aria-labelledby\":\"permits-title\",\"aria-describedby\":\"permits-description\"},/*#__PURE__*/React.createElement(DialogTitle,{id:\"permits-title\"},/*#__PURE__*/React.createElement(\"div\",{className:classes.titleModal},/*#__PURE__*/React.createElement(VerifiedUserIcon,null),/*#__PURE__*/React.createElement(\"p\",{className:classes.text},\" Permisos para \",modal.rolName))),/*#__PURE__*/React.createElement(DialogContent,{id:\"permits-description\"},/*#__PURE__*/React.createElement(Permisos,{allPermits:permisos,key:`${modal.rolName}-${modal.id}`,rol:modal.id,stateLoad:setStatePermit})),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Spin,{style:{marginRight:100},spinning:loadPermit===\"load\"},loadPermit!==\"hide\"&&loadPermit!==\"load\"?/*#__PURE__*/React.createElement(Alert,{message:loadPermit===\"error\"?\"No se pudo guardar\":\"Guardado correctamente\",type:loadPermit}):false),/*#__PURE__*/React.createElement(Button,{onClick:handleCancel,color:\"danger\",simple:true},\"Cerrar\"))));}","map":{"version":3,"names":["React","useEffect","useRef","useState","Table","Form","Spin","Alert","Dialog","DialogTitle","DialogContent","DialogActions","VerifiedUserIcon","Button","EditableCell","useTable","columns","FormItem","Permisos","useStyles","title","name","key","EditableTable","classes","loadPermit","setLoadPermit","modal","setModal","visible","id","searchInput","formEdit","formCreate","data","permisos","loading","onEdit","onDelete","updateOnEdit","createItem","editItem","delItem","save","isEditing","cancel","onFinishFailed","updateNameItem","setStatePermit","val","showModal","record","mod","rolName","handleCancel","createElement","Fragment","maxName","maxCode","form","component","className","table","components","body","cell","size","bordered","scroll","x","dataSource","rowClassName","pagination","onChange","pageSize","open","keepMounted","onClose","titleModal","text","allPermits","rol","stateLoad","style","marginRight","spinning","message","type","onClick","color","simple"],"sources":["C:/Users/HUAWEI/Documents/GitHub/SinfonyPlataforma/src/views/Usuarios/Roles.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport { Table, Form, Spin, Alert } from \"antd\";\r\nimport \"antd/dist/antd.css\";\r\n//material ui\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport VerifiedUserIcon from \"@material-ui/icons/VerifiedUser\";\r\nimport Button from \"components/CustomButtons/Button.js\";\r\n//Local\r\nimport EditableCell from \"../../components/Custom/EditableCell\";\r\nimport useTable from \"../../hooks/useTableRol\";\r\nimport { columns } from \"../../utils/columnRoles\";\r\nimport FormItem from \"../../components/Custom/FormRoles\";\r\nimport Permisos from \"./Permisos\";\r\n//Styles\r\nimport useStyles from \"../../assets/jss/material-dashboard-pro-react/views/common\";\r\n//Constants\r\nconst title = \"Roles\";\r\nconst name = \"Rol\";\r\nconst key = \"rol\";\r\n\r\nexport default function EditableTable() {\r\n  const classes = useStyles();\r\n  const [loadPermit, setLoadPermit] = useState(\"hide\");\r\n  const [modal, setModal] = useState({\r\n    visible: false,\r\n    id: \"\",\r\n  });\r\n  const searchInput = useRef();\r\n  const {\r\n    formEdit,\r\n    formCreate,\r\n    data,\r\n    permisos,\r\n    loading,\r\n    onEdit,\r\n    onDelete,\r\n    updateOnEdit,\r\n    createItem,\r\n    editItem,\r\n    delItem,\r\n    save,\r\n    isEditing,\r\n    cancel,\r\n    onFinishFailed,\r\n    updateNameItem,\r\n  } = useTable({ key });\r\n\r\n  useEffect(() => {\r\n    updateNameItem(name);\r\n  }, []);\r\n\r\n  const setStatePermit = (val) => {\r\n    setLoadPermit(val);\r\n  };\r\n\r\n  const showModal = (record) => {\r\n    setModal((mod) => ({\r\n      ...mod,\r\n      visible: true,\r\n      rolName: record.name,\r\n      id: record.id,\r\n    }));\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setModal((mod) => ({ ...mod, visible: false }));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <FormItem\r\n        name={name}\r\n        title={title}\r\n        maxName={30}\r\n        maxCode={5}\r\n        formCreate={formCreate}\r\n        createItem={createItem}\r\n        onFinishFailed={onFinishFailed}\r\n        loading={loading}\r\n      />\r\n      <br />\r\n      <Form form={formEdit} component={false}>\r\n        <Table\r\n          className={classes.table}\r\n          components={{\r\n            body: {\r\n              cell: EditableCell,\r\n            },\r\n          }}\r\n          size=\"small\"\r\n          bordered\r\n          scroll={{ x: 500 }}\r\n          dataSource={data}\r\n          columns={columns(\r\n            cancel,\r\n            isEditing,\r\n            updateOnEdit,\r\n            save,\r\n            delItem,\r\n            editItem,\r\n            onEdit,\r\n            onDelete,\r\n            name,\r\n            searchInput,\r\n            classes,\r\n            showModal\r\n          )}\r\n          loading={loading}\r\n          rowClassName=\"editable-row\"\r\n          pagination={{\r\n            onChange: cancel,\r\n            pageSize: 5,\r\n          }}\r\n        />\r\n      </Form>\r\n      <Dialog\r\n        open={modal.visible}\r\n        keepMounted\r\n        onClose={handleCancel}\r\n        aria-labelledby=\"permits-title\"\r\n        aria-describedby=\"permits-description\"\r\n      >\r\n        <DialogTitle id=\"permits-title\">\r\n          <div className={classes.titleModal}>\r\n            <VerifiedUserIcon />\r\n            <p className={classes.text}> Permisos para {modal.rolName}</p>\r\n          </div>\r\n        </DialogTitle>\r\n        <DialogContent id=\"permits-description\">\r\n          <Permisos\r\n            allPermits={permisos}\r\n            key={`${modal.rolName}-${modal.id}`}\r\n            rol={modal.id}\r\n            stateLoad={setStatePermit}\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Spin style={{ marginRight: 100 }} spinning={loadPermit === \"load\"}>\r\n            {loadPermit !== \"hide\" && loadPermit !== \"load\" ? (\r\n              <Alert\r\n                message={\r\n                  loadPermit === \"error\"\r\n                    ? \"No se pudo guardar\"\r\n                    : \"Guardado correctamente\"\r\n                }\r\n                type={loadPermit}\r\n              />\r\n            ) : (\r\n              false\r\n            )}\r\n          </Spin>\r\n          <Button onClick={handleCancel} color=\"danger\" simple>\r\n            Cerrar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}