{"ast":null,"code":"import axios from'axios';import{loadState}from'helpers';import store from'_redux/store';import{expired}from'_redux/actions';axios.defaults.mode='application/json';axios.defaults.headers.post['Content-Type']='application/json';axios.defaults.headers.common['Authorization']=`Bearer ${process.env.REACT_APP_TOKEN_API}`;axios.interceptors.request.use(config=>{const{access_token,token_type}=loadState('token')||{};const{REACT_APP_URL_API}=loadState('app')||{};config.baseURL=REACT_APP_URL_API;if(access_token){config.headers.Authorization=`${token_type} ${access_token}`;config.headers.WithCredentials=true;}if(config.data instanceof FormData){config.headers['Content-Type']=undefined;}return config;},error=>{return Promise.reject(error);});axios.interceptors.response.use(response=>{const{access_token}=loadState('token')||{};if(response.status===401&&access_token){store.dispatch(expired());}return response;},error=>{return Promise.reject(error);});","map":{"version":3,"names":["axios","loadState","store","expired","defaults","mode","headers","post","common","process","env","REACT_APP_TOKEN_API","interceptors","request","use","config","access_token","token_type","REACT_APP_URL_API","baseURL","Authorization","WithCredentials","data","FormData","undefined","error","Promise","reject","response","status","dispatch"],"sources":["C:/Users/HUAWEI/Documents/GitHub/SinfonyPlataforma/src/config/axios.js"],"sourcesContent":["import axios from 'axios'\r\n\r\nimport { loadState } from 'helpers'\r\nimport store from '_redux/store'\r\nimport { expired } from '_redux/actions'\r\n\r\naxios.defaults.mode = 'application/json'\r\naxios.defaults.headers.post['Content-Type'] = 'application/json'\r\naxios.defaults.headers.common['Authorization'] = `Bearer ${process.env.REACT_APP_TOKEN_API}`\r\n\r\naxios.interceptors.request.use(\r\n  config => {\r\n    const { access_token, token_type } = loadState('token') || {}\r\n    const { REACT_APP_URL_API } = loadState('app') || {}\r\n\r\n    config.baseURL = REACT_APP_URL_API\r\n\r\n    if (access_token) {\r\n      config.headers.Authorization = `${token_type} ${access_token}`\r\n      config.headers.WithCredentials = true\r\n    }\r\n\r\n    if (config.data instanceof FormData) {\r\n      config.headers['Content-Type'] = undefined\r\n    }\r\n\r\n    return config\r\n  },\r\n  error => {\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\naxios.interceptors.response.use(\r\n  response => {\r\n    const { access_token } = loadState('token') || {}\r\n    if (response.status === 401 && access_token) {\r\n      store.dispatch(expired())\r\n    }\r\n    return response\r\n  },\r\n  error => {\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,OAASC,SAAS,KAAQ,SAAS,CACnC,MAAO,CAAAC,KAAK,KAAM,cAAc,CAChC,OAASC,OAAO,KAAQ,gBAAgB,CAExCH,KAAK,CAACI,QAAQ,CAACC,IAAI,CAAG,kBAAkB,CACxCL,KAAK,CAACI,QAAQ,CAACE,OAAO,CAACC,IAAI,CAAC,cAAc,CAAC,CAAG,kBAAkB,CAChEP,KAAK,CAACI,QAAQ,CAACE,OAAO,CAACE,MAAM,CAAC,eAAe,CAAC,CAAG,UAAUC,OAAO,CAACC,GAAG,CAACC,mBAAmB,EAAE,CAE5FX,KAAK,CAACY,YAAY,CAACC,OAAO,CAACC,GAAG,CAC5BC,MAAM,EAAI,CACR,KAAM,CAAEC,YAAY,CAAEC,UAAW,CAAC,CAAGhB,SAAS,CAAC,OAAO,CAAC,EAAI,CAAC,CAAC,CAC7D,KAAM,CAAEiB,iBAAkB,CAAC,CAAGjB,SAAS,CAAC,KAAK,CAAC,EAAI,CAAC,CAAC,CAEpDc,MAAM,CAACI,OAAO,CAAGD,iBAAiB,CAElC,GAAIF,YAAY,CAAE,CAChBD,MAAM,CAACT,OAAO,CAACc,aAAa,CAAG,GAAGH,UAAU,IAAID,YAAY,EAAE,CAC9DD,MAAM,CAACT,OAAO,CAACe,eAAe,CAAG,IAAI,CACvC,CAEA,GAAIN,MAAM,CAACO,IAAI,WAAY,CAAAC,QAAQ,CAAE,CACnCR,MAAM,CAACT,OAAO,CAAC,cAAc,CAAC,CAAGkB,SAAS,CAC5C,CAEA,MAAO,CAAAT,MAAM,CACf,CAAC,CACDU,KAAK,EAAI,CACP,MAAO,CAAAC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC,CAC9B,CACF,CAAC,CAEDzB,KAAK,CAACY,YAAY,CAACgB,QAAQ,CAACd,GAAG,CAC7Bc,QAAQ,EAAI,CACV,KAAM,CAAEZ,YAAa,CAAC,CAAGf,SAAS,CAAC,OAAO,CAAC,EAAI,CAAC,CAAC,CACjD,GAAI2B,QAAQ,CAACC,MAAM,GAAK,GAAG,EAAIb,YAAY,CAAE,CAC3Cd,KAAK,CAAC4B,QAAQ,CAAC3B,OAAO,CAAC,CAAC,CAAC,CAC3B,CACA,MAAO,CAAAyB,QAAQ,CACjB,CAAC,CACDH,KAAK,EAAI,CACP,MAAO,CAAAC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC,CAC9B,CACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}