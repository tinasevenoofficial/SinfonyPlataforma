{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{useParams,useHistory}from\"react-router-dom\";import PlaylistAddCheckIcon from\"@material-ui/icons/PlaylistAddCheck\";import NoteAddIcon from\"@material-ui/icons/NoteAdd\";import ViewAgendaIcon from\"@material-ui/icons/ViewAgenda\";import AssignmentTurnedInIcon from\"@material-ui/icons/AssignmentTurnedIn\";import CircularProgress from\"@material-ui/core/CircularProgress\";import FacturarEscrituras from\"./FacturarEscrituras\";import FinishView from\"./FinishView\";import NavBar from\"components/Navbars/NavBar\";import Radicacion from\"views/Proyectos/Radiacion/Dashboard\";import Liquidar from\"views/LiquidacionEscritura/LiquidarEscritura\";import{EXTERNAL_API_PATHS}from\"utils/constants\";const defaultDisabled=[1,2,3];export default function RadicacionShow(){let{id,step}=useParams();let history=useHistory();const[view,setView]=useState(step?parseInt(step):0);const[loading,setLoading]=useState(false);const[state,setState]=useState();const[idRadicacion,setIdRadicacion]=useState(id);const[numRadicacion,setNumRadicacion]=useState(null);const[disabled,setDisabled]=useState([]);const steps=[{title:\"Radicación\",description:id?\"Editar radicación\":\"Crear radicación\",Icon:NoteAddIcon},{title:\"Liquidación\",description:\"Liquidar\",Icon:ViewAgendaIcon},{title:\"Facturación\",description:\"Facturar escritura\",Icon:PlaylistAddCheckIcon},{title:\"Finalizada\",description:\"Completa\",Icon:AssignmentTurnedInIcon}];const onChange=c=>{setView(c);history.push(`/admin/radicacion/${idRadicacion}/${c}`);};const getDisabled=stateRad=>{if(stateRad===\"radicacion\"){return[2,3];}else if(stateRad===\"liquidacion\"){return[3];}else{return[];}};const onChangeId=(numRad,idRad)=>{setIdRadicacion(idRad);setNumRadicacion(numRad);setDisabled(getDisabled(\"liquidacion\"));history.push(`/admin/radicacion/${idRad}/0`);};useEffect(()=>{if(idRadicacion){setLoading(true);axios.get(`${EXTERNAL_API_PATHS.radicaciones}/${idRadicacion}`).then(res=>{setNumRadicacion(res.data.numero_radicacion);setDisabled(getDisabled(res.data.estado));setState(res.data.estado);setLoading(false);});}else{setDisabled(defaultDisabled);}},[]);const isVisible=idView=>{return view===idView&&!disabled.includes(idView)&&!!idRadicacion&&!!numRadicacion;};const setStateLiquidacion=s=>{setState(s);setDisabled(getDisabled(s));};const finish=()=>{onChange(3);setDisabled([]);};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"a\",{id:\"top\"}),/*#__PURE__*/React.createElement(NavBar,{onChange:onChange,steps:steps,stepsDisabled:disabled,value:view}),loading&&/*#__PURE__*/React.createElement(CircularProgress,{color:\"secondary\",className:\"d-block mx-auto\"}),view===0&&/*#__PURE__*/React.createElement(Radicacion,{idRad:numRadicacion,OnChangeId:onChangeId,nextStep:()=>onChange(1)}),isVisible(1)&&/*#__PURE__*/React.createElement(Liquidar,{id:numRadicacion,nextStep:()=>onChange(2),state:state,setState:setStateLiquidacion}),isVisible(2)&&/*#__PURE__*/React.createElement(FacturarEscrituras,{id:idRadicacion,numRad:numRadicacion,nextStep:finish}),isVisible(3)&&/*#__PURE__*/React.createElement(FinishView,{numRad:numRadicacion}));}","map":{"version":3,"names":["React","useState","useEffect","axios","useParams","useHistory","PlaylistAddCheckIcon","NoteAddIcon","ViewAgendaIcon","AssignmentTurnedInIcon","CircularProgress","FacturarEscrituras","FinishView","NavBar","Radicacion","Liquidar","EXTERNAL_API_PATHS","defaultDisabled","RadicacionShow","id","step","history","view","setView","parseInt","loading","setLoading","state","setState","idRadicacion","setIdRadicacion","numRadicacion","setNumRadicacion","disabled","setDisabled","steps","title","description","Icon","onChange","c","push","getDisabled","stateRad","onChangeId","numRad","idRad","get","radicaciones","then","res","data","numero_radicacion","estado","isVisible","idView","includes","setStateLiquidacion","s","finish","createElement","Fragment","stepsDisabled","value","color","className","OnChangeId","nextStep"],"sources":["C:/Users/HUAWEI/Documents/GitHub/SinfonyPlataforma/src/views/Radicacion/Radicacion.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\n\r\nimport PlaylistAddCheckIcon from \"@material-ui/icons/PlaylistAddCheck\";\r\nimport NoteAddIcon from \"@material-ui/icons/NoteAdd\";\r\nimport ViewAgendaIcon from \"@material-ui/icons/ViewAgenda\";\r\nimport AssignmentTurnedInIcon from \"@material-ui/icons/AssignmentTurnedIn\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nimport FacturarEscrituras from \"./FacturarEscrituras\";\r\nimport FinishView from \"./FinishView\";\r\nimport NavBar from \"components/Navbars/NavBar\";\r\nimport Radicacion from \"views/Proyectos/Radiacion/Dashboard\";\r\nimport Liquidar from \"views/LiquidacionEscritura/LiquidarEscritura\";\r\nimport { EXTERNAL_API_PATHS } from \"utils/constants\";\r\n\r\nconst defaultDisabled = [1, 2, 3];\r\n\r\nexport default function RadicacionShow() {\r\n  let { id, step } = useParams();\r\n  let history = useHistory();\r\n  const [view, setView] = useState(step ? parseInt(step) : 0);\r\n  const [loading, setLoading] = useState(false);\r\n  const [state, setState] = useState();\r\n  const [idRadicacion, setIdRadicacion] = useState(id);\r\n  const [numRadicacion, setNumRadicacion] = useState(null);\r\n  const [disabled, setDisabled] = useState([]);\r\n\r\n  const steps = [\r\n    {\r\n      title: \"Radicación\",\r\n      description: id ? \"Editar radicación\" : \"Crear radicación\",\r\n      Icon: NoteAddIcon,\r\n    },\r\n    {\r\n      title: \"Liquidación\",\r\n      description: \"Liquidar\",\r\n      Icon: ViewAgendaIcon,\r\n    },\r\n    {\r\n      title: \"Facturación\",\r\n      description: \"Facturar escritura\",\r\n      Icon: PlaylistAddCheckIcon,\r\n    },\r\n    {\r\n      title: \"Finalizada\",\r\n      description: \"Completa\",\r\n      Icon: AssignmentTurnedInIcon,\r\n    },\r\n  ];\r\n\r\n  const onChange = (c) => {\r\n    setView(c);\r\n    history.push(`/admin/radicacion/${idRadicacion}/${c}`);\r\n  };\r\n\r\n  const getDisabled = (stateRad) => {\r\n    if (stateRad === \"radicacion\") {\r\n      return [2, 3];\r\n    } else if (stateRad === \"liquidacion\") {\r\n      return [3];\r\n    } else {\r\n      return [];\r\n    }\r\n  };\r\n\r\n  const onChangeId = (numRad, idRad) => {\r\n    setIdRadicacion(idRad);\r\n    setNumRadicacion(numRad);\r\n    setDisabled(getDisabled(\"liquidacion\"));\r\n    history.push(`/admin/radicacion/${idRad}/0`);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (idRadicacion) {\r\n      setLoading(true);\r\n      axios\r\n        .get(`${EXTERNAL_API_PATHS.radicaciones}/${idRadicacion}`)\r\n        .then((res) => {\r\n          setNumRadicacion(res.data.numero_radicacion);\r\n          setDisabled(getDisabled(res.data.estado));\r\n          setState(res.data.estado);\r\n          setLoading(false);\r\n        });\r\n    } else {\r\n      setDisabled(defaultDisabled);\r\n    }\r\n  }, []);\r\n\r\n  const isVisible = (idView) => {\r\n    return (\r\n      view === idView &&\r\n      !disabled.includes(idView) &&\r\n      !!idRadicacion &&\r\n      !!numRadicacion\r\n    );\r\n  };\r\n\r\n  const setStateLiquidacion = (s) => {\r\n    setState(s);\r\n    setDisabled(getDisabled(s));\r\n  };\r\n\r\n  const finish = () => {\r\n    onChange(3);\r\n    setDisabled([]);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <a id=\"top\" />\r\n\r\n      <NavBar\r\n        onChange={onChange}\r\n        steps={steps}\r\n        stepsDisabled={disabled}\r\n        value={view}\r\n      />\r\n      {loading && (\r\n        <CircularProgress color=\"secondary\" className=\"d-block mx-auto\" />\r\n      )}\r\n      {view === 0 && (\r\n        <Radicacion\r\n          idRad={numRadicacion}\r\n          OnChangeId={onChangeId}\r\n          nextStep={() => onChange(1)}\r\n        />\r\n      )}\r\n      {isVisible(1) && (\r\n        <Liquidar\r\n          id={numRadicacion}\r\n          nextStep={() => onChange(2)}\r\n          state={state}\r\n          setState={setStateLiquidacion}\r\n        />\r\n      )}\r\n      {isVisible(2) && (\r\n        <FacturarEscrituras\r\n          id={idRadicacion}\r\n          numRad={numRadicacion}\r\n          nextStep={finish}\r\n        />\r\n      )}\r\n      {isVisible(3) && <FinishView numRad={numRadicacion} />}\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}