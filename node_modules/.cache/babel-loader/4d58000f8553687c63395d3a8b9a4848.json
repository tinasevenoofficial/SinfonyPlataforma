{"ast":null,"code":"import React,{useEffect,useRef,useState}from\"react\";import{useSelector}from\"react-redux\";import axios from\"axios\";import{Table,Form}from\"antd\";import\"antd/dist/antd.css\";//Local\nimport EditableCell from\"../../components/Custom/EditableCell\";import useTable from\"../../hooks/useTable\";import{columns}from\"../../utils/columnMunicipios\";import FormItem from\"../../components/Custom/FormMunicipios\";import{EXTERNAL_API_PATHS}from\"../../utils/constants\";//Styles\nimport useStyles from\"../../assets/jss/material-dashboard-pro-react/views/common\";//Constants\nconst title=\"Municipios\";const name=\"Municipio\";const key=\"municipio\";export default function EditableTable(){const classes=useStyles();const searchInput=useRef();const[departments,setDepartments]=useState();const{formEdit,formCreate,data,loading,onEdit,onDelete,updateOnEdit,createItem,editItem,delItem,save,isEditing,cancel,onFinishFailed,updateNameItem,updateData}=useTable({key});const auth=useSelector(state=>state.auth);const header={headers:{Authorization:`Bearer ${auth.token}`}};useEffect(()=>{axios.get(EXTERNAL_API_PATHS[\"departamento\"]).then(res=>{setDepartments(res.data);});updateNameItem(name);},[]);useEffect(()=>{if(data.length){const newData=data.map(item=>({...item,department:item.department.name}));updateData(newData);}},[loading]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(FormItem,{name:name,title:title,maxName:30,maxCode:5,formCreate:formCreate,createItem:createItem,onFinishFailed:onFinishFailed,loading:loading,departments:departments}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Form,{form:formEdit,component:false},/*#__PURE__*/React.createElement(Table,{className:classes.table,components:{body:{cell:EditableCell}},size:\"small\",bordered:true,scroll:{x:500},dataSource:data,columns:columns(cancel,isEditing,updateOnEdit,save,delItem,editItem,onEdit,onDelete,name,searchInput,classes),loading:loading,rowClassName:\"editable-row\",pagination:{onChange:cancel,pageSize:5}})));}","map":{"version":3,"names":["React","useEffect","useRef","useState","useSelector","axios","Table","Form","EditableCell","useTable","columns","FormItem","EXTERNAL_API_PATHS","useStyles","title","name","key","EditableTable","classes","searchInput","departments","setDepartments","formEdit","formCreate","data","loading","onEdit","onDelete","updateOnEdit","createItem","editItem","delItem","save","isEditing","cancel","onFinishFailed","updateNameItem","updateData","auth","state","header","headers","Authorization","token","get","then","res","length","newData","map","item","department","createElement","Fragment","maxName","maxCode","form","component","className","table","components","body","cell","size","bordered","scroll","x","dataSource","rowClassName","pagination","onChange","pageSize"],"sources":["C:/Users/HUAWEI/Documents/GitHub/SinfonyPlataforma/src/views/Lugares/Municipios.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport axios from \"axios\";\r\nimport { Table, Form } from \"antd\";\r\nimport \"antd/dist/antd.css\";\r\n//Local\r\nimport EditableCell from \"../../components/Custom/EditableCell\";\r\nimport useTable from \"../../hooks/useTable\";\r\nimport { columns } from \"../../utils/columnMunicipios\";\r\nimport FormItem from \"../../components/Custom/FormMunicipios\";\r\nimport { EXTERNAL_API_PATHS } from \"../../utils/constants\";\r\n//Styles\r\nimport useStyles from \"../../assets/jss/material-dashboard-pro-react/views/common\";\r\n//Constants\r\nconst title = \"Municipios\";\r\nconst name = \"Municipio\";\r\nconst key = \"municipio\";\r\n\r\nexport default function EditableTable() {\r\n  const classes = useStyles();\r\n  const searchInput = useRef();\r\n  const [departments, setDepartments] = useState();\r\n  const {\r\n    formEdit,\r\n    formCreate,\r\n    data,\r\n    loading,\r\n    onEdit,\r\n    onDelete,\r\n    updateOnEdit,\r\n    createItem,\r\n    editItem,\r\n    delItem,\r\n    save,\r\n    isEditing,\r\n    cancel,\r\n    onFinishFailed,\r\n    updateNameItem,\r\n    updateData,\r\n  } = useTable({ key });\r\n\r\n  const auth = useSelector((state) => state.auth);\r\n  const header = {\r\n    headers: { Authorization: `Bearer ${auth.token}` },\r\n  };\r\n\r\n  useEffect(() => {\r\n    axios.get(EXTERNAL_API_PATHS[\"departamento\"]).then((res) => {\r\n      setDepartments(res.data);\r\n    });\r\n    updateNameItem(name);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (data.length) {\r\n      const newData = data.map((item) => ({\r\n        ...item,\r\n        department: item.department.name,\r\n      }));\r\n      updateData(newData);\r\n    }\r\n  }, [loading]);\r\n\r\n  return (\r\n    <>\r\n      <FormItem\r\n        name={name}\r\n        title={title}\r\n        maxName={30}\r\n        maxCode={5}\r\n        formCreate={formCreate}\r\n        createItem={createItem}\r\n        onFinishFailed={onFinishFailed}\r\n        loading={loading}\r\n        departments={departments}\r\n      />\r\n      <br />\r\n      <Form form={formEdit} component={false}>\r\n        <Table\r\n          className={classes.table}\r\n          components={{\r\n            body: {\r\n              cell: EditableCell,\r\n            },\r\n          }}\r\n          size=\"small\"\r\n          bordered\r\n          scroll={{ x: 500 }}\r\n          dataSource={data}\r\n          columns={columns(\r\n            cancel,\r\n            isEditing,\r\n            updateOnEdit,\r\n            save,\r\n            delItem,\r\n            editItem,\r\n            onEdit,\r\n            onDelete,\r\n            name,\r\n            searchInput,\r\n            classes\r\n          )}\r\n          loading={loading}\r\n          rowClassName=\"editable-row\"\r\n          pagination={{\r\n            onChange: cancel,\r\n            pageSize: 5,\r\n          }}\r\n        />\r\n      </Form>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}